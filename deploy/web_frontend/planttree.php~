<?php
require_once( "sparqllib.php" );
 
$db = sparql_connect( "http://192.168.0.181:3030/data/query" );
if( !$db ) { print $db->errno() . ": " . $db->error(). "\n"; exit; }
$db->ns( "foaf","http://xmlns.com/foaf/0.1/" );
$db->ns( "dc","http://purl.org/dc/elements/1.1/" );
$db->ns( "ms","http://measurementg/dc/elements/1.1/" );
$db->ns( "foaf","http://xmlns.com/foaf/0.1/" );
 
$sparql = "SELECT * WHERE { ?a ?b ?c } LIMIT 5";
$key="<urn:stg_1>";
$sparql = "SELECT ?url WHERE {<"."$key"."> ?b ?url FILTER (?b=dc:inst)} LIMIT 10";
$result = $db->query( $sparql ); 
if( !$result ) { print $db->errno() . ": " . $db->error(). "\n"; exit; }
 
$fields = $result->field_array( $result );
 
print "<p>Number of rows: ".$result->num_rows( $result )." results.</p>";
print "<table class='example_table'>";
print "<tr>";
foreach( $fields as $field )
{
	print "<th>$field</th>";
}
print "</tr>";
/*while( $row = $result->fetch_array() )
{
	print "<tr>";
	foreach( $fields as $field )
	{
		print "<td>$row[$field]</td>"."$field";
		
	}
	print "</tr>";
}
print "</table>";*/
$jsontree='[';
while( $row = $result->fetch_array() )
{
	
	
	//foreach( $fields as $field )
	//{
		$jsontree="$jsontree".'{"title":"'."$row[url]".'","isFolder":true,"isLazy":true,"key":"'."$row[url]".'"},';
		//fetch_array()
	//}
	
}
$jsontree=substr($jsontree, 0, -1);
echo "$jsontree".']';